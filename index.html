<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Movie Hub</title>
  <style>
    /* Reset & Base */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background-color: #141414;
      color: #fff;
      font-family: Arial, sans-serif;
      line-height: 1.6;
      overflow-x: hidden; /* Prevent horizontal body scroll */
    }

    /* Header */
    header {
      position: fixed;
      top: 0;
      width: 100%;
      height: 60px;
      background-color: #141414;
      display: flex;
      justify-content: center;  /* center the title */
      align-items: center;
      z-index: 999;
    }
    .header-content {
      width: 100%;
      max-width: 1200px;
      display: flex;
      justify-content: center;  /* center the text inside the container */
      align-items: center;
      position: relative;
    }
    .header-title {
      font-size: 1.5rem; /* bigger text */
      font-weight: bold;
    }
    .search-icon {
      position: absolute;
      right: 0;
      cursor: pointer;
      font-size: 1.5rem; /* bigger icon */
    }

    /* Top Slideshow (16:9) */
    .top-slideshow {
      margin-top: 60px; /* space for fixed header */
      width: 100vw;
      height: calc(100vw * 9 / 16); /* 16:9 aspect ratio */
      max-height: 600px; /* optional max-height */
      overflow: hidden;
      position: relative;
    }
    .slides-container {
      display: flex;
      height: 100%;
      scroll-snap-type: x mandatory;
      overflow-x: auto;
      overflow-y: hidden;
      scroll-behavior: smooth;
      -ms-overflow-style: none;  /* IE 10+ */
      scrollbar-width: none;     /* Firefox */
    }
    .slides-container::-webkit-scrollbar {
      display: none; /* Chrome/Safari */
    }
    .slide {
      flex: 0 0 100%;
      height: 100%;
      scroll-snap-align: start;
      position: relative;
    }
    .slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    /* Movie title below the rectangular box */
    .top-movie-title {
      text-align: center;
      font-size: 1.25rem;
      margin: 10px 0;
    }

    /* Section Layout */
    .section {
      padding: 20px 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .section h2 {
      margin-bottom: 10px;
      font-size: 1.4rem; /* bigger text */
    }
    /* Horizontal manual scroll, one line per category */
    .movie-carousel {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      overflow-y: hidden;
      scroll-behavior: smooth;
      -ms-overflow-style: none;  /* IE 10+ */
      scrollbar-width: thin;     /* Firefox: you can show a thin scrollbar if you like */
    }
    .movie-carousel::-webkit-scrollbar {
      height: 6px;
    }
    .movie-carousel::-webkit-scrollbar-thumb {
      background: #333;
      border-radius: 3px;
    }

    /* Larger posters */
    .movie-item {
      width: 250px;   /* bigger poster width */
      aspect-ratio: 2 / 3;
      background-color: #333;
      border-radius: 4px;
      overflow: hidden;
      flex: 0 0 auto; /* do not shrink, do not expand */
      text-align: center;
    }
    .movie-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    /* Footer */
    footer {
      padding: 20px;
      background-color: #141414;
      border-top: 1px solid #333;
      text-align: center;
      margin-top: 20px;
    }
    footer h3 {
      margin-bottom: 10px;
      font-size: 1.25rem;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-content">
      <div class="header-title">Movie Hub</div>
      <div class="search-icon" id="searchIcon">üîç</div>
    </div>
  </header>

  <!-- Top Slideshow (Hindi Movies) -->
  <div class="top-slideshow">
    <div class="slides-container" id="slidesContainer"></div>
  </div>
  <!-- Show the name of the currently visible movie below the rectangular box -->
  <div class="top-movie-title" id="topMovieTitle"></div>

  <!-- Categories stacked vertically, each horizontally scrollable -->
  <section class="section">
    <h2>Recommended Movies</h2>
    <div class="movie-carousel" id="recommended-carousel"></div>
  </section>

  <section class="section">
    <h2>Popular in Action</h2>
    <div class="movie-carousel" id="action-carousel"></div>
  </section>

  <section class="section">
    <h2>New Releases</h2>
    <div class="movie-carousel" id="new-carousel"></div>
  </section>

  <section class="section">
    <h2>Bollywood (Hindi)</h2>
    <div class="movie-carousel" id="bollywood-carousel"></div>
  </section>

  <section class="section">
    <h2>Hollywood (English)</h2>
    <div class="movie-carousel" id="hollywood-carousel"></div>
  </section>

  <section class="section">
    <h2>South (Telugu)</h2>
    <div class="movie-carousel" id="south-carousel"></div>
  </section>

  <section class="section">
    <h2>Punjabi</h2>
    <div class="movie-carousel" id="punjabi-carousel"></div>
  </section>

  <section class="section">
    <h2>Anime (Japanese)</h2>
    <div class="movie-carousel" id="anime-carousel"></div>
  </section>

  <section class="section">
    <h2>K-Drama (Korean)</h2>
    <div class="movie-carousel" id="kdrama-carousel"></div>
  </section>

  <section class="section">
    <h2>Chinese Drama (Mandarin)</h2>
    <div class="movie-carousel" id="chinese-carousel"></div>
  </section>

  <!-- Footer -->
  <footer>
    <h3>Footer</h3>
    <p>Additional Links or Info</p>
  </footer>

  <script>
    const apiKey = 'af1f708691a1a8fa6862a85e2cc240ea';
    const imageBaseUrl = 'https://image.tmdb.org/t/p/w500';
    const fallbackImage = 'https://via.placeholder.com/500x750?text=No+Image';

    // 1) TOP SLIDESHOW (Hindi Movies)
    let topSlides = [];
    let currentSlideIndex = 0;

    async function loadTopSlideshow() {
      const url = `https://api.themoviedb.org/3/discover/movie?with_original_language=hi&sort_by=popularity.desc&api_key=${apiKey}`;
      try {
        const response = await fetch(url);
        const data = await response.json();
        topSlides = data.results.slice(0, 10); // up to 10 slides
        const slidesContainer = document.getElementById('slidesContainer');

        topSlides.forEach(movie => {
          const slide = document.createElement('div');
          slide.className = 'slide';
          const img = document.createElement('img');
          img.src = movie.backdrop_path
            ? (imageBaseUrl + movie.backdrop_path)
            : (movie.poster_path ? (imageBaseUrl + movie.poster_path) : fallbackImage);
          slide.appendChild(img);
          slidesContainer.appendChild(slide);
        });

        // Show initial movie title
        updateTopMovieTitle(0);

        // Auto-scroll every 4 seconds
        setInterval(() => {
          currentSlideIndex = (currentSlideIndex + 1) % topSlides.length;
          scrollToSlide(currentSlideIndex);
          updateTopMovieTitle(currentSlideIndex);
        }, 4000);
      } catch (error) {
        console.error('Error loading top slideshow:', error);
      }
    }

    function scrollToSlide(index) {
      const slidesContainer = document.getElementById('slidesContainer');
      const containerWidth = slidesContainer.clientWidth;
      slidesContainer.scrollTo({
        left: containerWidth * index,
        behavior: 'smooth'
      });
    }

    function updateTopMovieTitle(index) {
      const topMovieTitleEl = document.getElementById('topMovieTitle');
      const movie = topSlides[index];
      topMovieTitleEl.textContent = movie ? (movie.title || 'No Title') : '';
    }

    // 2) LOAD CATEGORY CAROUSELS
    async function loadCategory(url, containerId) {
      try {
        const response = await fetch(url);
        const data = await response.json();
        const results = data.results || [];
        const container = document.getElementById(containerId);
        results.slice(0, 12).forEach(movie => {
          const item = document.createElement('div');
          item.className = 'movie-item';
          const img = document.createElement('img');
          img.src = movie.poster_path
            ? (imageBaseUrl + movie.poster_path)
            : fallbackImage;
          img.alt = movie.title || 'Movie Poster';
          item.appendChild(img);
          container.appendChild(item);
        });
      } catch (error) {
        console.error(`Error loading category for ${containerId}:`, error);
      }
    }

    function loadRecommendedMovies() {
      const url = `https://api.themoviedb.org/3/movie/top_rated?api_key=${apiKey}`;
      loadCategory(url, 'recommended-carousel');
    }
    function loadActionMovies() {
      const url = `https://api.themoviedb.org/3/discover/movie?with_genres=28&sort_by=popularity.desc&api_key=${apiKey}`;
      loadCategory(url, 'action-carousel');
    }
    function loadNewReleases() {
      const url = `https://api.themoviedb.org/3/movie/now_playing?api_key=${apiKey}`;
      loadCategory(url, 'new-carousel');
    }
    function loadBollywood() {
      const url = `https://api.themoviedb.org/3/discover/movie?with_original_language=hi&sort_by=popularity.desc&api_key=${apiKey}`;
      loadCategory(url, 'bollywood-carousel');
    }
    function loadHollywood() {
      const url = `https://api.themoviedb.org/3/discover/movie?with_original_language=en&sort_by=popularity.desc&api_key=${apiKey}`;
      loadCategory(url, 'hollywood-carousel');
    }
    function loadSouth() {
      const url = `https://api.themoviedb.org/3/discover/movie?with_original_language=te&sort_by=popularity.desc&api_key=${apiKey}`;
      loadCategory(url, 'south-carousel');
    }
    function loadPunjabi() {
      const url = `https://api.themoviedb.org/3/discover/movie?with_original_language=pa&sort_by=popularity.desc&api_key=${apiKey}`;
      loadCategory(url, 'punjabi-carousel');
    }
    function loadAnime() {
      const url = `https://api.themoviedb.org/3/discover/movie?with_original_language=ja&sort_by=popularity.desc&api_key=${apiKey}`;
      loadCategory(url, 'anime-carousel');
    }
    function loadKdrama() {
      const url = `https://api.themoviedb.org/3/discover/movie?with_original_language=ko&sort_by=popularity.desc&api_key=${apiKey}`;
      loadCategory(url, 'kdrama-carousel');
    }
    function loadChinese() {
      const url = `https://api.themoviedb.org/3/discover/movie?with_original_language=zh&sort_by=popularity.desc&api_key=${apiKey}`;
      loadCategory(url, 'chinese-carousel');
    }

    // Init
    document.addEventListener('DOMContentLoaded', () => {
      // Top Slideshow
      loadTopSlideshow();

      // Categories
      loadRecommendedMovies();
      loadActionMovies();
      loadNewReleases();
      loadBollywood();
      loadHollywood();
      loadSouth();
      loadPunjabi();
      loadAnime();
      loadKdrama();
      loadChinese();

      // Search icon click
      document.getElementById('searchIcon').addEventListener('click', () => {
        alert('Search functionality to be implemented.');
      });
    });
  </script>
</body>
</html>
